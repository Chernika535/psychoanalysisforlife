<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Å–∏—Ö–æ–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–µ</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 0;
            margin: 0;
            min-height: 100vh;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 16px;
        }

        .header {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #2c3e50;
            padding: 20px 16px;
            text-align: center;
            margin: -16px -16px 20px -16px;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.8;
        }

        .progress-bar {
            background: rgba(44, 62, 80, 0.2);
            height: 6px;
            border-radius: 3px;
            margin-top: 12px;
            overflow: hidden;
        }

        .progress-fill {
            background: #FF8C00;
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .tab-navigation {
            display: flex;
            background: var(--tg-theme-secondary-bg-color, #f1f1f1);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab-btn {
            flex: 1;
            min-width: 70px;
            padding: 12px 6px;
            background: transparent;
            border: none;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
            color: var(--tg-theme-hint-color, #999);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .tab-btn.active {
            background: #FFD700;
            color: #2c3e50;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--tg-theme-text-color, #000);
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--tg-theme-text-color, #000);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-hint-color, #ddd);
            border-radius: 8px;
            font-size: 14px;
            background: var(--tg-theme-bg-color, white);
            color: var(--tg-theme-text-color, #000);
            resize: vertical;
            min-height: 40px;
        }

        .input-field:focus {
            outline: none;
            border-color: #FFD700;
        }

        .textarea {
            min-height: 80px;
        }

        .scale-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .scale-slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: var(--tg-theme-hint-color, #ddd);
            outline: none;
            -webkit-appearance: none;
        }

        .scale-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FFD700;
            cursor: pointer;
        }

        .scale-value {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
            color: #FF8C00;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--tg-theme-hint-color, #ddd);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checkbox.checked {
            background: #FFD700;
            border-color: #FFD700;
        }

        .checkbox.checked::after {
            content: '‚úì';
            color: #2c3e50;
            font-size: 12px;
            font-weight: bold;
        }

        .btn {
            background: #FFD700;
            color: #2c3e50;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: opacity 0.2s ease;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--tg-theme-secondary-bg-color, #f1f1f1);
            color: var(--tg-theme-text-color, #000);
        }

        .daily-tracker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 16px 0;
        }

        .day-cell {
            aspect-ratio: 1;
            border: 1px solid var(--tg-theme-hint-color, #ddd);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .day-cell.completed {
            background: #FFD700;
            color: #2c3e50;
            border-color: #FFD700;
        }

        .day-cell.current {
            background: #FFF3CD;
            border-color: #FF8C00;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 16px 0;
        }

        .stat-card {
            background: var(--tg-theme-bg-color, white);
            border: 1px solid var(--tg-theme-hint-color, #ddd);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #FF8C00;
        }

        .stat-label {
            font-size: 12px;
            color: var(--tg-theme-hint-color, #666);
            margin-top: 4px;
        }

        .journal-entry {
            background: var(--tg-theme-bg-color, white);
            border: 1px solid #FFD700;
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
        }

        .journal-date {
            font-size: 12px;
            color: #FF8C00;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .journal-content {
            font-size: 14px;
            line-height: 1.4;
        }

        .journal-type {
            display: inline-block;
            background: #FFD700;
            color: #2c3e50;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-right: 8px;
        }

        .weekly-summary {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #2c3e50;
            padding: 16px;
            border-radius: 12px;
            margin: 12px 0;
        }

        .summary-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .summary-section {
            margin-bottom: 12px;
        }

        .summary-label {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--tg-theme-secondary-bg-color, #f1f1f1);
            color: var(--tg-theme-text-color, #000);
            border: none;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn.active {
            background: #FFD700;
            color: #2c3e50;
        }

        .search-box {
            width: 100%;
            padding: 12px;
            border: 1px solid #FFD700;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .no-entries {
            text-align: center;
            color: var(--tg-theme-hint-color, #999);
            padding: 40px 20px;
            font-style: italic;
        }

        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #FFD700;
            color: #2c3e50;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        .emergency-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 8px 0;
        }

        .breathing-guide {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #2c3e50;
            border-radius: 12px;
            margin: 16px 0;
        }

        .breathing-circle {
            width: 100px;
            height: 100px;
            border: 3px solid #2c3e50;
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            animation: breathe 4s infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .technique-card {
            background: var(--tg-theme-bg-color, white);
            border: 1px solid var(--tg-theme-hint-color, #ddd);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
        }

        .technique-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--tg-theme-text-color, #000);
        }

        @media (max-width: 480px) {
            .container {
                padding: 12px;
            }
            
            .header {
                margin: -12px -12px 16px -12px;
                padding: 16px 12px;
            }
            
            .tab-btn {
                font-size: 10px;
                padding: 10px 4px;
                min-width: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–†–∞–±–æ—á–∞—è —Ç–µ—Ç—Ä–∞–¥—å —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è</h1>
            <p>–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±–∞—Ä—å–µ—Ä–æ–≤ –≤ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('dashboard')">–ì–ª–∞–≤–Ω–∞—è</button>
            <button class="tab-btn" onclick="switchTab('journal')">–ñ—É—Ä–Ω–∞–ª</button>
            <button class="tab-btn" onclick="switchTab('summaries')">–°–≤–æ–¥–∫–∏</button>
            <button class="tab-btn" onclick="switchTab('diagnosis')">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
            <button class="tab-btn" onclick="switchTab('defense')">–ó–∞—â–∏—Ç—ã</button>
            <button class="tab-btn" onclick="switchTab('symbols')">–°–∏–º–≤–æ–ª—ã</button>
            <button class="tab-btn" onclick="switchTab('plan')">–ü–ª–∞–Ω</button>
            <button class="tab-btn" onclick="switchTab('emergency')">SOS</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="section">
                <div class="section-title">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="completedDays">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgAnxiety">-</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω—è—è —Ç—Ä–µ–≤–æ–≥–∞</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completedExercises">0</div>
                        <div class="stat-label">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä</div>
                <div class="daily-tracker" id="dailyTracker"></div>
                
                <div class="input-group">
                    <label class="input-label">–£—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–≥–∏ —Å–µ–≥–æ–¥–Ω—è (1-10)</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="todayAnxiety">
                        <span>10</span>
                        <div class="scale-value" id="anxietyValue">5</div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">–ó–∞–º–µ—Ç–∫–∏ –¥–Ω—è</label>
                    <textarea class="input-field textarea" id="todayNotes" placeholder="–ß—Ç–æ –≤–∞–∂–Ω–æ–≥–æ –∑–∞–º–µ—Ç–∏–ª–∏ —Å–µ–≥–æ–¥–Ω—è?"></textarea>
                </div>

                <button class="btn" onclick="saveDailyEntry()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å –¥–Ω—è</button>
            </div>
        </div>

        <!-- Journal Tab -->
        <div id="journal" class="tab-content">
            <div class="section">
                <div class="section-title">–ñ—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π</div>
                
                <input type="text" class="search-box" id="journalSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∑–∞–ø–∏—Å—è–º..." oninput="filterJournal()">
                
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterJournalByType('all')">–í—Å–µ</button>
                    <button class="filter-btn" onclick="filterJournalByType('daily')">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ</button>
                    <button class="filter-btn" onclick="filterJournalByType('defense')">–ó–∞—â–∏—Ç—ã</button>
                    <button class="filter-btn" onclick="filterJournalByType('symbols')">–°–∏–º–≤–æ–ª—ã</button>
                    <button class="filter-btn" onclick="filterJournalByType('diagnosis')">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
                </div>
                
                <div id="journalEntries">
                    <div class="no-entries">–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç. –ù–∞—á–Ω–∏—Ç–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–¥–µ–ª—ã!</div>
                </div>
            </div>
        </div>

        <!-- Weekly Summaries Tab -->
        <div id="summaries" class="tab-content">
            <div class="section">
                <div class="section-title">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏</div>
                <p style="margin-bottom: 16px;">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–¥–∫–∏ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –∑–∞ –Ω–µ–¥–µ–ª—é –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏–∫–∏.</p>
                
                <button class="btn" onclick="generateWeeklySummary()">üìä –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–¥–∫—É –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é</button>
                
                <div id="weeklySummaries">
                    <div class="no-entries">–°–≤–æ–¥–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!</div>
                </div>
            </div>
        </div>

        <!-- Diagnosis Tab -->
        <div id="diagnosis" class="tab-content">
            <div class="section">
                <div class="section-title">–ö–∞—Ä—Ç–∞ —Ç–µ–∫—É—â–µ–π –∂–∏–∑–Ω–∏</div>
                <p style="margin-bottom: 16px;">–û—Ü–µ–Ω–∏—Ç–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —à–∫–∞–ª–µ 1-10:</p>
                
                <div class="input-group">
                    <label class="input-label">–ö–∞—Ä—å–µ—Ä–∞ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="careerSat">
                        <span>10</span>
                        <div class="scale-value" id="careerValue">5</div>
                    </div>
                    <textarea class="input-field" id="careerNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–û—Ç–Ω–æ—à–µ–Ω–∏—è (—Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ)</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="relationshipSat">
                        <span>10</span>
                        <div class="scale-value" id="relationshipValue">5</div>
                    </div>
                    <textarea class="input-field" id="relationshipNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–°–µ–º—å—è –∏ –¥—Ä—É–∑—å—è</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="familySat">
                        <span>10</span>
                        <div class="scale-value" id="familyValue">5</div>
                    </div>
                    <textarea class="input-field" id="familyNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ó–¥–æ—Ä–æ–≤—å–µ –∏ —ç–Ω–µ—Ä–≥–∏—è</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="healthSat">
                        <span>10</span>
                        <div class="scale-value" id="healthValue">5</div>
                    </div>
                    <textarea class="input-field" id="healthNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–§–∏–Ω–∞–Ω—Å—ã</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="financeSat">
                        <span>10</span>
                        <div class="scale-value" id="financeValue">5</div>
                    </div>
                    <textarea class="input-field" id="financeNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–õ–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="growthSat">
                        <span>10</span>
                        <div class="scale-value" id="growthValue">5</div>
                    </div>
                    <textarea class="input-field" id="growthNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ —Ö–æ–±–±–∏</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="creativitySat">
                        <span>10</span>
                        <div class="scale-value" id="creativityValue">5</div>
                    </div>
                    <textarea class="input-field" id="creativityNotes" placeholder="–ß—Ç–æ –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç..."></textarea>
                </div>

                <button class="btn" onclick="saveDiagnosis()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
            </div>

            <div class="section">
                <div class="section-title">–ó–∞—Å—Ç—Ä—è–≤—à–∏–µ —Ü–µ–ª–∏</div>
                
                <div class="input-group">
                    <label class="input-label">–¶–µ–ª—å 1</label>
                    <input type="text" class="input-field" id="goal1" placeholder="–¶–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è...">
                    <input type="text" class="input-field" id="goal1Time" placeholder="–ö–∞–∫ –¥–æ–ª–≥–æ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è?" style="margin-top: 8px;">
                    <textarea class="input-field" id="goal1Reasons" placeholder="–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã..." style="margin-top: 8px;"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–¶–µ–ª—å 2</label>
                    <input type="text" class="input-field" id="goal2" placeholder="–¶–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è...">
                    <input type="text" class="input-field" id="goal2Time" placeholder="–ö–∞–∫ –¥–æ–ª–≥–æ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è?" style="margin-top: 8px;">
                    <textarea class="input-field" id="goal2Reasons" placeholder="–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã..." style="margin-top: 8px;"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–¶–µ–ª—å 3</label>
                    <input type="text" class="input-field" id="goal3" placeholder="–¶–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è...">
                    <input type="text" class="input-field" id="goal3Time" placeholder="–ö–∞–∫ –¥–æ–ª–≥–æ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è?" style="margin-top: 8px;">
                    <textarea class="input-field" id="goal3Reasons" placeholder="–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã..." style="margin-top: 8px;"></textarea>
                </div>

                <button class="btn" onclick="saveGoals()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–ª–∏</button>
            </div>

            <div class="section">
                <div class="section-title">–ü–µ—Ä–≤—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã –æ –±–∞—Ä—å–µ—Ä–∞—Ö</div>
                
                <div class="input-group">
                    <label class="input-label">–ö —Ü–µ–ª–∏ 1 - —á—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</label>
                    <textarea class="input-field" id="barrier1Hypothesis" placeholder="–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤–∞—Å –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –¥–æ—Å—Ç–∏—á—å —ç—Ç–æ–π —Ü–µ–ª–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ö —Ü–µ–ª–∏ 2 - —á—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</label>
                    <textarea class="input-field" id="barrier2Hypothesis" placeholder="–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤–∞—Å –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –¥–æ—Å—Ç–∏—á—å —ç—Ç–æ–π —Ü–µ–ª–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ö —Ü–µ–ª–∏ 3 - —á—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</label>
                    <textarea class="input-field" id="barrier3Hypothesis" placeholder="–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤–∞—Å –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –¥–æ—Å—Ç–∏—á—å —ç—Ç–æ–π —Ü–µ–ª–∏?"></textarea>
                </div>

                <button class="btn" onclick="saveBarrierHypotheses()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≥–∏–ø–æ—Ç–µ–∑—ã</button>
            </div>
        </div>

        <!-- Defense Tab -->
        <div id="defense" class="tab-content">
            <div class="section">
                <div class="section-title">–î–Ω–µ–≤–Ω–∏–∫ –∑–∞—â–∏—Ç–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π</div>
                <p style="margin-bottom: 16px;">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –º–æ–º–µ–Ω—Ç—ã –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ —Å–≤–æ–∏ —Ä–µ–∞–∫—Ü–∏–∏:</p>
                
                <div class="input-group">
                    <label class="input-label">–°–∏—Ç—É–∞—Ü–∏—è, –≤—ã–∑–≤–∞–≤—à–∞—è –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç</label>
                    <textarea class="input-field" id="defenseReason" placeholder="–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–í–∞—à–∞ –ø–µ—Ä–≤–∞—è —Ä–µ–∞–∫—Ü–∏—è</label>
                    <textarea class="input-field" id="defenseReaction" placeholder="–ß—Ç–æ –ø–æ–¥—É–º–∞–ª–∏/—Å–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–û–±—ä—è—Å–Ω–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ä–∞–∑—É –ø–æ—è–≤–∏–ª–æ—Å—å</label>
                    <textarea class="input-field" id="defenseExplanation" placeholder="–ö–∞–∫ –æ–±—ä—è—Å–Ω–∏–ª–∏ —Å–µ–±–µ —Å–≤–æ—é —Ä–µ–∞–∫—Ü–∏—é?"></textarea>
                </div>

                <button class="btn" onclick="addDefenseEntry()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
            </div>

            <div class="section">
                <div class="section-title">–ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –∑–∞—â–∏—Ç</div>
                
                <div class="input-group">
                    <label class="input-label">–ö–∞–∫–∏–µ –∑–∞—â–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —á–∞—â–µ –≤—Å–µ–≥–æ?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('denial')" id="denialCheck"></div>
                            <span>–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ ("–í—Å–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ")</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('projection')" id="projectionCheck"></div>
                            <span>–ü—Ä–æ–µ–∫—Ü–∏—è ("–û–Ω–∏ –≤–∏–Ω–æ–≤–∞—Ç—ã")</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('rationalization')" id="rationalizationCheck"></div>
                            <span>–†–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è ("–£ –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–∏—á–∏–Ω—ã")</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('avoidance')" id="avoidanceCheck"></div>
                            <span>–ò–∑–±–µ–≥–∞–Ω–∏–µ ("–õ—É—á—à–µ –Ω–µ —Ä–∏—Å–∫–æ–≤–∞—Ç—å")</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('regression')" id="regressionCheck"></div>
                            <span>–†–µ–≥—Ä–µ—Å—Å–∏—è ("–ü—É—Å—Ç—å –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π —Ä–µ—à–∞–µ—Ç")</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('displacement')" id="displacementCheck"></div>
                            <span>–ó–∞–º–µ—â–µ–Ω–∏–µ (–∑–ª–æ—Å—Ç—å –Ω–∞ —Å–ª–∞–±—ã—Ö –≤–º–µ—Å—Ç–æ —Å–∏–ª—å–Ω—ã—Ö)</span>
                        </div>
                        <div class="checkbox-item">
                            <div class="checkbox" onclick="toggleCheckbox('sublimation')" id="sublimationCheck"></div>
                            <span>–°—É–±–ª–∏–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ)</span>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–ª–∞–≤–Ω–∞—è –∑–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è</label>
                    <input type="text" class="input-field" id="mainDefense" placeholder="–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –∑–∞—â–∏—Ç–∞...">
                </div>

                <div class="input-group">
                    <label class="input-label">–û—Ç —á–µ–≥–æ –∏–º–µ–Ω–Ω–æ –æ–Ω–∞ –∑–∞—â–∏—â–∞–µ—Ç</label>
                    <textarea class="input-field" id="defenseFunction" placeholder="–ö–∞–∫–æ–π —Å—Ç—Ä–∞—Ö –∏–ª–∏ –±–æ–ª—å —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∑–∞ –∑–∞—â–∏—Ç–æ–π?"></textarea>
                </div>

                <button class="btn" onclick="saveDefenseAnalysis()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑</button>
            </div>

            <div class="section">
                <div class="section-title">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π</div>
                
                <div class="input-group">
                    <label class="input-label">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è</label>
                    <textarea class="input-field" id="alternativeReaction" placeholder="–ß—Ç–æ –±—É–¥–µ—Ç–µ –¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–æ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ü–ª–∞–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é</label>
                    <input type="text" class="input-field" id="experimentSituation" placeholder="–í –∫–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ?">
                    <input type="text" class="input-field" id="experimentAction" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ" style="margin-top: 8px;">
                    <input type="date" class="input-field" id="experimentDate" style="margin-top: 8px;">
                </div>

                <button class="btn" onclick="startExperiment()">–ù–∞—á–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç</button>
            </div>
        </div>

        <!-- Symbols Tab -->
        <div id="symbols" class="tab-content">
            <div class="section">
                <div class="section-title">–°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫</div>
                
                <div class="input-group">
                    <label class="input-label">–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Å–æ–Ω</label>
                    <textarea class="input-field" id="todayDream" placeholder="–ß—Ç–æ —Å–Ω–∏–ª–æ—Å—å? (–¥–∞–∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–º–æ—Ü–∏—è –æ—Ç —Å–Ω–∞</label>
                    <input type="text" class="input-field" id="dreamEmotion" placeholder="–ß—Ç–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–æ —Å–Ω–µ –∏ –ø–æ—Å–ª–µ?">
                </div>

                <div class="input-group">
                    <label class="input-label">–û–≥–æ–≤–æ—Ä–∫–∏, –∑–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å</label>
                    <textarea class="input-field" id="slipsOfTongue" placeholder="–ß—Ç–æ —Å–∫–∞–∑–∞–ª–∏ –Ω–µ —Ç–æ –∏–ª–∏ –∑–∞–±—ã–ª–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ß—Ç–æ –ø—Ä–∏–≤–ª–µ–∫–ª–æ –≤–Ω–∏–º–∞–Ω–∏–µ</label>
                    <textarea class="input-field" id="attentionGrabbed" placeholder="–ß—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏, –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–æ –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã?"></textarea>
                </div>

                <button class="btn" onclick="addSymbolEntry()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –¥–Ω—è</button>
            </div>

            <div class="section">
                <div class="section-title">–ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤</div>
                
                <div class="input-group">
                    <label class="input-label">–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ–±—Ä–∞–∑—ã –≤ —Å–Ω–∞—Ö</label>
                    <textarea class="input-field" id="repeatingDreamImages" placeholder="–ö–∞–∫–∏–µ –æ–±—Ä–∞–∑—ã —Å–Ω—è—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç–µ–º—ã –æ–≥–æ–≤–æ—Ä–æ–∫</label>
                    <textarea class="input-field" id="repeatingSlips" placeholder="–û —á–µ–º —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ –Ω–µ —Ç–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ß—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ</label>
                    <textarea class="input-field" id="repeatingAttention" placeholder="–ß—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–º–µ—á–∞–µ—Ç–µ?"></textarea>
                </div>

                <button class="btn" onclick="analyzeSymbols()">–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã</button>
            </div>

            <div class="section">
                <div class="section-title">–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞</div>
                
                <div class="input-group">
                    <label class="input-label">–í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
                    <input type="text" class="input-field" id="selectedSymbol" placeholder="–°–∞–º—ã–π —è—Ä–∫–∏–π –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è —Å–∏–º–≤–æ–ª">
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—É—Ç—å —Å–∏–º–≤–æ–ª–∞</label>
                    <textarea class="input-field" id="symbolEmotion" placeholder="–ß—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –¥—É–º–∞—è –æ–± —ç—Ç–æ–º —Å–∏–º–≤–æ–ª–µ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–¥–µ –≤ –∂–∏–∑–Ω–∏ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ø–æ—Ö–æ–∂–∏–µ —á—É–≤—Å—Ç–≤–∞</label>
                    <textarea class="input-field" id="symbolParallel" placeholder="–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ç–∞–∫–∏–µ –∂–µ —ç–º–æ—Ü–∏–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–∏–ø–æ—Ç–µ–∑–∞ –æ –∑–Ω–∞—á–µ–Ω–∏–∏</label>
                    <textarea class="input-field" id="symbolHypothesis" placeholder="–≠—Ç–æ—Ç —Å–∏–º–≤–æ–ª –æ—Ç—Ä–∞–∂–∞–µ—Ç –º–æ—é –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤... –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</label>
                    <textarea class="input-field" id="symbolExperiment" placeholder="–ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–¥–µ–ª–∞–µ—Ç–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–∏–ø–æ—Ç–µ–∑—ã?"></textarea>
                </div>

                <button class="btn" onclick="saveSymbolAnalysis()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–∞</button>
            </div>
        </div>

        <!-- Plan Tab -->
        <div id="plan" class="tab-content">
            <div class="section">
                <div class="section-title">–í—ã–±–æ—Ä –±–∞—Ä—å–µ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã</div>
                
                <div class="input-group">
                    <label class="input-label">–ë–∞—Ä—å–µ—Ä 1</label>
                    <select class="input-field" id="barrier1Type">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="fear">–°—Ç—Ä–∞—Ö</option>
                        <option value="restriction">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—Ä–µ—Ç</option>
                        <option value="role">–ó–∞—Å—Ç—ã–≤—à–∞—è —Ä–æ–ª—å</option>
                    </select>
                    <textarea class="input-field" id="barrier1Description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–∞—Ä—å–µ—Ä–∞" style="margin-top: 8px;"></textarea>
                    <label class="input-label" style="margin-top: 12px;">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å (1-10)</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="barrier1Readiness">
                        <span>10</span>
                        <div class="scale-value" id="barrier1Value">5</div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">–ë–∞—Ä—å–µ—Ä 2</label>
                    <select class="input-field" id="barrier2Type">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="fear">–°—Ç—Ä–∞—Ö</option>
                        <option value="restriction">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—Ä–µ—Ç</option>
                        <option value="role">–ó–∞—Å—Ç—ã–≤—à–∞—è —Ä–æ–ª—å</option>
                    </select>
                    <textarea class="input-field" id="barrier2Description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–∞—Ä—å–µ—Ä–∞" style="margin-top: 8px;"></textarea>
                    <label class="input-label" style="margin-top: 12px;">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å (1-10)</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="barrier2Readiness">
                        <span>10</span>
                        <div class="scale-value" id="barrier2Value">5</div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">–ë–∞—Ä—å–µ—Ä 3</label>
                    <select class="input-field" id="barrier3Type">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                        <option value="fear">–°—Ç—Ä–∞—Ö</option>
                        <option value="restriction">–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—Ä–µ—Ç</option>
                        <option value="role">–ó–∞—Å—Ç—ã–≤—à–∞—è —Ä–æ–ª—å</option>
                    </select>
                    <textarea class="input-field" id="barrier3Description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–∞—Ä—å–µ—Ä–∞" style="margin-top: 8px;"></textarea>
                    <label class="input-label" style="margin-top: 12px;">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å (1-10)</label>
                    <div class="scale-input">
                        <span>1</span>
                        <input type="range" class="scale-slider" min="1" max="10" value="5" id="barrier3Readiness">
                        <span>10</span>
                        <div class="scale-value" id="barrier3Value">5</div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">–í—ã–±—Ä–∞–Ω–Ω—ã–π –±–∞—Ä—å–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã</label>
                    <input type="text" class="input-field" id="chosenBarrier" placeholder="–ö–∞–∫–æ–π –±–∞—Ä—å–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç–µ?">
                </div>

                <div class="input-group">
                    <label class="input-label">–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç</label>
                    <textarea class="input-field" id="barrierReason" placeholder="–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞"></textarea>
                </div>

                <button class="btn" onclick="chooseBarrier()">–í—ã–±—Ä–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã</button>
            </div>

            <div class="section">
                <div class="section-title">–ú–µ—Å—è—á–Ω—ã–π –ø–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
                
                <div class="input-group">
                    <label class="input-label">–§–æ–∫—É—Å –º–µ—Å—è—Ü–∞</label>
                    <input type="text" class="input-field" id="monthFocus" placeholder="–ù–∞–¥ —á–µ–º —Ä–∞–±–æ—Ç–∞–µ–º —ç—Ç–æ—Ç –º–µ—Å—è—Ü?">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 1 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week1Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                    <input type="date" class="input-field" id="week1Deadline" style="margin-top: 8px;">
                    <input type="text" class="input-field" id="week1Success" placeholder="–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞" style="margin-top: 8px;">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 2 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week2Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                    <input type="date" class="input-field" id="week2Deadline" style="margin-top: 8px;">
                    <input type="text" class="input-field" id="week2Success" placeholder="–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞" style="margin-top: 8px;">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 3 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week3Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                    <input type="date" class="input-field" id="week3Deadline" style="margin-top: 8px;">
                    <input type="text" class="input-field" id="week3Success" placeholder="–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞" style="margin-top: 8px;">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 4 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week4Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                    <input type="date" class="input-field" id="week4Deadline" style="margin-top: 8px;">
                    <input type="text" class="input-field" id="week4Success" placeholder="–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞" style="margin-top: 8px;">
                </div>

                <button class="btn" onclick="saveMonthlyPlan()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞–Ω –º–µ—Å—è—Ü–∞</button>
            </div>

            <div class="section">
                <div class="section-title">–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
                
                <div class="input-group">
                    <label class="input-label">–ö—Ç–æ –≤ –∫—É—Ä—Å–µ –≤–∞—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤</label>
                    <input type="text" class="input-field" id="supportPerson" placeholder="–ò–º—è —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ä–µ–∞–∫—Ü–∏—è—Ö</label>
                    <textarea class="input-field" id="reminders" placeholder="–ö–∞–∫ –±—É–¥–µ—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–µ–±–µ –æ –Ω–æ–≤–æ–º –ø–æ–≤–µ–¥–µ–Ω–∏–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ü–ª–∞–Ω –ø—Ä–∏ —Å—Ä—ã–≤–∞—Ö</label>
                    <textarea class="input-field" id="relapsePlan" placeholder="–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç–µ—Å—å –∫ —Å—Ç–∞—Ä—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º?"></textarea>
                </div>

                <button class="btn" onclick="saveSupportSystem()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏</button>
            </div>
        </div>tab-        <!-- Symbols Tab -->
        <div id="symbols" class="tab-content">
            <div class="section">
                <div class="section-title">–°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫</div>
                
                <div class="input-group">
                    <label class="input-label">–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Å–æ–Ω</label>
                    <textarea class="input-field" id="todayDream" placeholder="–ß—Ç–æ —Å–Ω–∏–ª–æ—Å—å? (–¥–∞–∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–º–æ—Ü–∏—è –æ—Ç —Å–Ω–∞</label>
                    <input type="text" class="input-field" id="dreamEmotion" placeholder="–ß—Ç–æ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–æ —Å–Ω–µ –∏ –ø–æ—Å–ª–µ?">
                </div>

                <div class="input-group">
                    <label class="input-label">–û–≥–æ–≤–æ—Ä–∫–∏, –∑–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å</label>
                    <textarea class="input-field" id="slipsOfTongue" placeholder="–ß—Ç–æ —Å–∫–∞–∑–∞–ª–∏ –Ω–µ —Ç–æ –∏–ª–∏ –∑–∞–±—ã–ª–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ß—Ç–æ –ø—Ä–∏–≤–ª–µ–∫–ª–æ –≤–Ω–∏–º–∞–Ω–∏–µ</label>
                    <textarea class="input-field" id="attentionGrabbed" placeholder="–ß—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏, –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–æ –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã?"></textarea>
                </div>

                <button class="btn" onclick="addSymbolEntry()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –¥–Ω—è</button>
            </div>

            <div class="section">
                <div class="section-title">–ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤</div>
                
                <div class="input-group">
                    <label class="input-label">–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ–±—Ä–∞–∑—ã –≤ —Å–Ω–∞—Ö</label>
                    <textarea class="input-field" id="repeatingDreamImages" placeholder="–ö–∞–∫–∏–µ –æ–±—Ä–∞–∑—ã —Å–Ω—è—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç–µ–º—ã –æ–≥–æ–≤–æ—Ä–æ–∫</label>
                    <textarea class="input-field" id="repeatingSlips" placeholder="–û —á–µ–º —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ –Ω–µ —Ç–æ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ß—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ</label>
                    <textarea class="input-field" id="repeatingAttention" placeholder="–ß—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–º–µ—á–∞–µ—Ç–µ?"></textarea>
                </div>

                <button class="btn" onclick="analyzeSymbols()">–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã</button>
            </div>

            <div class="section">
                <div class="section-title">–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞</div>
                
                <div class="input-group">
                    <label class="input-label">–í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
                    <input type="text" class="input-field" id="selectedSymbol" placeholder="–°–∞–º—ã–π —è—Ä–∫–∏–π –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è —Å–∏–º–≤–æ–ª">
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—É—Ç—å —Å–∏–º–≤–æ–ª–∞</label>
                    <textarea class="input-field" id="symbolEmotion" placeholder="–ß—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –¥—É–º–∞—è –æ–± —ç—Ç–æ–º —Å–∏–º–≤–æ–ª–µ?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–¥–µ –≤ –∂–∏–∑–Ω–∏ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ø–æ—Ö–æ–∂–∏–µ —á—É–≤—Å—Ç–≤–∞</label>
                    <textarea class="input-field" id="symbolParallel" placeholder="–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ç–∞–∫–∏–µ –∂–µ —ç–º–æ—Ü–∏–∏?"></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–∏–ø–æ—Ç–µ–∑–∞ –æ –∑–Ω–∞—á–µ–Ω–∏–∏</label>
                    <textarea class="input-field" id="symbolHypothesis" placeholder="–≠—Ç–æ—Ç —Å–∏–º–≤–æ–ª –æ—Ç—Ä–∞–∂–∞–µ—Ç –º–æ—é –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤... –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</label>
                    <textarea class="input-field" id="symbolExperiment" placeholder="–ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–¥–µ–ª–∞–µ—Ç–µ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–∏–ø–æ—Ç–µ–∑—ã?"></textarea>
                </div>

                <button class="btn" onclick="saveSymbolAnalysis()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–∞</button>
            </div>
        </div>

        <!-- Plan Tab -->
        <div id="plan" class="tab-content">
            <div class="section">
                <div class="section-title">–ú–µ—Å—è—á–Ω—ã–π –ø–ª–∞–Ω</div>
                
                <div class="input-group">
                    <label class="input-label">–§–æ–∫—É—Å –º–µ—Å—è—Ü–∞</label>
                    <input type="text" class="input-field" id="monthFocus" placeholder="–ù–∞–¥ —á–µ–º —Ä–∞–±–æ—Ç–∞–µ–º?">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 1 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week1Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                </div>

                <div class="input-group">
                    <label class="input-label">–ù–µ–¥–µ–ª—è 2 - –î–µ–π—Å—Ç–≤–∏–µ</label>
                    <input type="text" class="input-field" id="week2Action" placeholder="–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ">
                </div>

                <button class="btn" onclick="saveMonthlyPlan()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞–Ω</button>
            </div>
        </div>

        <!-- Emergency Tab -->
        <div id="emergency" class="tab-content">
            <div class="section">
                <div class="section-title">SOS: –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å</div>
                
                <button class="emergency-btn" onclick="startBreathingExercise()">ü´Å –î—ã—Ö–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ 4-7-8</button>
                <button class="emergency-btn" onclick="show54321Technique()">üß† –¢–µ—Ö–Ω–∏–∫–∞ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è 5-4-3-2-1</button>
                <button class="emergency-btn" onclick="showSelfCompassion()">üíù –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–∞–º–æ—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è</button>
                <button class="emergency-btn" onclick="showProgressReminder()">üìà –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ</button>
                <button class="emergency-btn" onclick="showBodyRelaxation()">üßò‚Äç‚ôÄÔ∏è –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è</button>
            </div>

            <div class="breathing-guide" id="breathingGuide" style="display: none;">
                <h3>–î—ã—Ö–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ 4-7-8</h3>
                <div class="breathing-circle" id="breathingCircle">–í–¥–æ—Ö 4</div>
                <p>–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –∫—Ä—É–≥–µ</p>
                <button class="btn btn-secondary" onclick="stopBreathingExercise()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
            </div>

            <div class="technique-card" id="technique54321" style="display: none;">
                <div class="technique-title">–¢–µ—Ö–Ω–∏–∫–∞ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è 5-4-3-2-1</div>
                <p><strong>–ù–∞–∑–æ–≤–∏—Ç–µ:</strong></p>
                <ul>
                    <li>5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –í–ò–î–ò–¢–ï</li>
                    <li>4 –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –°–õ–´–®–ò–¢–ï</li>
                    <li>3 –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç–µ –ü–û–¢–†–û–ì–ê–¢–¨</li>
                    <li>2 –∑–∞–ø–∞—Ö–∞, –∫–æ—Ç–æ—Ä—ã–µ –ß–£–í–°–¢–í–£–ï–¢–ï</li>
                    <li>1 –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç–µ –†–ê–ó–õ–ò–ß–ò–¢–¨</li>
                </ul>
                <button class="btn btn-secondary" onclick="hide54321Technique()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="technique-card" id="selfCompassionCard" style="display: none;">
                <div class="technique-title">–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–∞–º–æ—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è</div>
                <p><strong>–°–∫–∞–∂–∏—Ç–µ —Å–µ–±–µ:</strong></p>
                <ul>
                    <li>"–°–µ–π—á–∞—Å –º–Ω–µ —Ç—Ä—É–¥–Ω–æ, –∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ"</li>
                    <li>"–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞"</li>
                    <li>"–Ø –æ—Ç–Ω–æ—à—É—Å—å –∫ —Å–µ–±–µ —Å –¥–æ–±—Ä–æ—Ç–æ–π –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º"</li>
                    <li>"–ß—Ç–æ –±—ã —è —Å–∫–∞–∑–∞–ª –ª—É—á—à–µ–º—É –¥—Ä—É–≥—É –≤ —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏?"</li>
                </ul>
                <button class="btn btn-secondary" onclick="hideSelfCompassion()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="technique-card" id="bodyRelaxationCard" style="display: none;">
                <div class="technique-title">–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –º—ã—à–µ—á–Ω–∞—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è</div>
                <p><strong>–ü–æ–æ—á–µ—Ä–µ–¥–Ω–æ –Ω–∞–ø—Ä—è–≥–∞–π—Ç–µ –∏ —Ä–∞—Å—Å–ª–∞–±–ª—è–π—Ç–µ:</strong></p>
                <ol>
                    <li>–°–æ–∂–º–∏—Ç–µ –∫—É–ª–∞–∫–∏ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥, –∑–∞—Ç–µ–º —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ</li>
                    <li>–ù–∞–ø—Ä—è–≥–∏—Ç–µ –º—ã—à—Ü—ã –ª–∏—Ü–∞, –∑–∞—Ç–µ–º —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ</li>
                    <li>–ü–æ–¥–Ω–∏–º–∏—Ç–µ –ø–ª–µ—á–∏ –∫ —É—à–∞–º, –∑–∞—Ç–µ–º –æ–ø—É—Å—Ç–∏—Ç–µ</li>
                    <li>–ù–∞–ø—Ä—è–≥–∏—Ç–µ –∂–∏–≤–æ—Ç, –∑–∞—Ç–µ–º —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ</li>
                    <li>–ù–∞–ø—Ä—è–≥–∏—Ç–µ –Ω–æ–≥–∏, –∑–∞—Ç–µ–º —Ä–∞—Å—Å–ª–∞–±—å—Ç–µ</li>
                </ol>
                <button class="btn btn-secondary" onclick="hideBodyRelaxation()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="section">
                <div class="section-title">–ö—Ä–∏–∑–∏—Å–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã</div>
                
                <div class="input-group">
                    <label class="input-label">–ß–µ–ª–æ–≤–µ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</label>
                    <input type="text" class="input-field" id="emergencyContact" placeholder="–ò–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω">
                </div>

                <div class="input-group">
                    <label class="input-label">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å</label>
                    <input type="text" class="input-field" id="professionalContact" placeholder="–ü—Å–∏—Ö–æ–ª–æ–≥/—Ç–µ—Ä–∞–ø–µ–≤—Ç">
                </div>

                <div class="input-group">
                    <label class="input-label">–ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è</label>
                    <input type="text" class="input-field" id="hotlineContact" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è">
                </div>

                <button class="btn" onclick="saveEmergencyContacts()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</button>
            </div>

            <div class="section">
                <div class="section-title">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</div>
                <p style="margin-bottom: 16px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –∏–ª–∏ –ª–∏—á–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞:</p>
                
                <button class="btn btn-secondary" onclick="exportData()">üìÑ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
                <button class="btn btn-secondary" onclick="exportProgress()" style="margin-top: 8px;">üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ</button>
                <button class="btn btn-secondary" onclick="exportJournalOnly()" style="margin-top: 8px;">üìù –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∂—É—Ä–Ω–∞–ª</button>
            </div>
        </div>
    </div>

    <!-- Toast for notifications -->
    <div class="toast" id="toast"></div>

    <script>
        // Initialize Telegram WebApp
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            tg.expand();
        }

        // Data storage
        let appData = {
            progress: {
                completedDays: 0,
                currentStreak: 0,
                completedExercises: 0,
                dailyEntries: [],
                anxietyHistory: []
            },
            journalEntries: [],
            weeklySummaries: [],
            reminders: {
                daily: false,
                weekly: false
            }
        };

        // Load data from localStorage
        function loadData() {
            try {
                const savedData = localStorage.getItem('psychoanalysisData');
                if (savedData) {
                    appData = { ...appData, ...JSON.parse(savedData) };
                    updateDashboard();
                    updateProgressBar();
                    initializeDailyTracker();
                    loadJournalEntries();
                    loadWeeklySummaries();
                }
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('psychoanalysisData', JSON.stringify(appData));
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hide all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Mark button as active
            event.target.classList.add('active');
        }

        // Update progress bar
        function updateProgressBar() {
            const totalExercises = 10;
            const completed = appData.progress.completedExercises;
            const percentage = Math.min((completed / totalExercises) * 100, 100);
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = percentage + '%';
            }
        }

        // Update dashboard stats
        function updateDashboard() {
            const elements = {
                completedDays: document.getElementById('completedDays'),
                currentStreak: document.getElementById('currentStreak'),
                completedExercises: document.getElementById('completedExercises'),
                avgAnxiety: document.getElementById('avgAnxiety')
            };

            if (elements.completedDays) {
                elements.completedDays.textContent = appData.progress.completedDays;
            }
            if (elements.currentStreak) {
                elements.currentStreak.textContent = appData.progress.currentStreak;
            }
            if (elements.completedExercises) {
                elements.completedExercises.textContent = appData.progress.completedExercises;
            }
            
            // Calculate average anxiety
            if (elements.avgAnxiety && appData.progress.anxietyHistory.length > 0) {
                const avg = appData.progress.anxietyHistory.reduce((a, b) => a + b, 0) / appData.progress.anxietyHistory.length;
                elements.avgAnxiety.textContent = avg.toFixed(1);
            }
        }

        // Initialize daily tracker
        function initializeDailyTracker() {
            const tracker = document.getElementById('dailyTracker');
            if (!tracker) return;
            
            tracker.innerHTML = '';
            
            for (let i = 0; i < 28; i++) {
                const day = document.createElement('div');
                day.className = 'day-cell';
                day.textContent = i + 1;
                
                const today = new Date().getDate();
                if (i + 1 === today) {
                    day.classList.add('current');
                }
                
                if (appData.progress.dailyEntries.includes(i + 1)) {
                    day.classList.add('completed');
                }
                
                tracker.appendChild(day);
            }
        }

        // Add entry to journal
        function addJournalEntry(type, title, content, data = {}) {
            const entry = {
                id: Date.now(),
                date: new Date().toISOString(),
                type: type,
                title: title,
                content: content,
                data: data
            };
            
            if (!appData.journalEntries) {
                appData.journalEntries = [];
            }
            
            appData.journalEntries.unshift(entry);
            saveData();
            loadJournalEntries();
        }

        // Load and display journal entries
        function loadJournalEntries() {
            const container = document.getElementById('journalEntries');
            if (!container) return;
            
            if (!appData.journalEntries || appData.journalEntries.length === 0) {
                container.innerHTML = '<div class="no-entries">–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç. –ù–∞—á–Ω–∏—Ç–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–¥–µ–ª—ã!</div>';
                return;
            }
            
            let html = '';
            appData.journalEntries.forEach(entry => {
                const date = new Date(entry.date).toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                html += `
                    <div class="journal-entry" data-type="${entry.type}">
                        <div class="journal-date">
                            <span class="journal-type">${getTypeLabel(entry.type)}</span>
                            ${date}
                        </div>
                        <div class="journal-content">
                            <strong>${entry.title}</strong><br>
                            ${entry.content}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Get type label for journal entries
        function getTypeLabel(type) {
            const labels = {
                'daily': '–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∑–∞–ø–∏—Å—å',
                'defense': '–ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã',
                'symbols': '–°–∏–º–≤–æ–ª—ã',
                'diagnosis': '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞',
                'goals': '–¶–µ–ª–∏',
                'plan': '–ü–ª–∞–Ω'
            };
            return labels[type] || type;
        }

        // Filter journal by type
        function filterJournalByType(type) {
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const entries = document.querySelectorAll('.journal-entry');
            entries.forEach(entry => {
                if (type === 'all' || entry.dataset.type === type) {
                    entry.style.display = 'block';
                } else {
                    entry.style.display = 'none';
                }
            });
        }

        // Filter journal by search
        function filterJournal() {
            const searchTerm = document.getElementById('journalSearch').value.toLowerCase();
            const entries = document.querySelectorAll('.journal-entry');
            
            entries.forEach(entry => {
                const content = entry.textContent.toLowerCase();
                if (content.includes(searchTerm)) {
                    entry.style.display = 'block';
                } else {
                    entry.style.display = 'none';
                }
            });
        }

        // Generate weekly summary
        function generateWeeklySummary() {
            const weekStart = new Date();
            weekStart.setDate(weekStart.getDate() - weekStart.getDay());
            weekStart.setHours(0, 0, 0, 0);
            
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekEnd.getDate() + 7);
            
            // Filter entries from this week
            const weekEntries = appData.journalEntries ? appData.journalEntries.filter(entry => {
                const entryDate = new Date(entry.date);
                return entryDate >= weekStart && entryDate < weekEnd;
            }) : [];
            
            // Calculate stats
            const anxietyThisWeek = appData.progress.anxietyHistory.slice(-7);
            const avgAnxiety = anxietyThisWeek.length > 0 ? 
                (anxietyThisWeek.reduce((a, b) => a + b, 0) / anxietyThisWeek.length).toFixed(1) : '–Ω/–¥';
            
            // Group entries by type
            const entriesByType = {};
            weekEntries.forEach(entry => {
                if (!entriesByType[entry.type]) {
                    entriesByType[entry.type] = [];
                }
                entriesByType[entry.type].push(entry);
            });
            
            // Create summary
            const summary = {
                id: Date.now(),
                weekStart: weekStart.toISOString(),
                weekEnd: weekEnd.toISOString(),
                totalEntries: weekEntries.length,
                avgAnxiety: avgAnxiety,
                entriesByType: entriesByType,
                keyInsights: generateKeyInsights(weekEntries),
                created: new Date().toISOString()
            };
            
            if (!appData.weeklySummaries) {
                appData.weeklySummaries = [];
            }
            
            appData.weeklySummaries.unshift(summary);
            saveData();
            loadWeeklySummaries();
            showToast('–°–≤–æ–¥–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é —Å–æ–∑–¥–∞–Ω–∞!');
        }

        // Generate key insights
        function generateKeyInsights(entries) {
            const insights = [];
            
            // Count entries by type
            const typeCount = {};
            entries.forEach(entry => {
                typeCount[entry.type] = (typeCount[entry.type] || 0) + 1;
            });
            
            // Most active area
            const mostActive = Object.entries(typeCount).sort((a, b) => b[1] - a[1])[0];
            if (mostActive) {
                insights.push(`–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å: ${getTypeLabel(mostActive[0])} (${mostActive[1]} –∑–∞–ø–∏—Å–µ–π)`);
            }
            
            if (entries.length === 0) {
                insights.push('–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –∑–∞–ø–∏—Å–µ–π –Ω–µ –±—ã–ª–æ - –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–µ–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏–µ–º!');
            } else if (entries.length >= 7) {
                insights.push('–û—Ç–ª–∏—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å! –î–µ–ª–∞–ª–∏ –∑–∞–ø–∏—Å–∏ –ø–æ—á—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å');
            }
            
            return insights;
        }

        // Load weekly summaries
        function loadWeeklySummaries() {
            const container = document.getElementById('weeklySummaries');
            if (!container) return;
            
            if (!appData.weeklySummaries || appData.weeklySummaries.length === 0) {
                container.innerHTML = '<div class="no-entries">–°–≤–æ–¥–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!</div>';
                return;
            }
            
            let html = '';
            appData.weeklySummaries.forEach(summary => {
                const weekStart = new Date(summary.weekStart).toLocaleDateString('ru-RU');
                const weekEnd = new Date(summary.weekEnd).toLocaleDateString('ru-RU');
                
                html += `
                    <div class="weekly-summary">
                        <div class="summary-title">–°–≤–æ–¥–∫–∞ ${weekStart} - ${weekEnd}</div>
                        
                        <div class="summary-section">
                            <div class="summary-label">–û–±—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</div>
                            –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: ${summary.totalEntries}<br>
                            –°—Ä–µ–¥–Ω—è—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å: ${summary.avgAnxiety}/10
                        </div>
                        
                        <div class="summary-section">
                            <div class="summary-label">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º:</div>
                            ${Object.entries(summary.entriesByType).map(([type, entries]) => 
                                `${getTypeLabel(type)}: ${entries.length} –∑–∞–ø–∏—Å–µ–π`
                            ).join('<br>') || '–ó–∞–ø–∏—Å–µ–π –Ω–µ –±—ã–ª–æ'}
                        </div>
                        
                        <div class="summary-section">
                            <div class="summary-label">–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã:</div>
                            ${summary.keyInsights.map(insight => `‚Ä¢ ${insight}`).join('<br>')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Checkbox toggle
        function toggleCheckbox(id) {
            const checkbox = document.getElementById(id + 'Check');
            if (checkbox) {
                checkbox.classList.toggle('checked');
            }
        }

        // Save daily entry
        function saveDailyEntry() {
            const anxietySlider = document.getElementById('todayAnxiety');
            const notesField = document.getElementById('todayNotes');
            
            if (!anxietySlider || !notesField) return;
            
            const anxiety = anxietySlider.value;
            const notes = notesField.value;
            const today = new Date().getDate();
            
            appData.progress.anxietyHistory.push(parseInt(anxiety));
            if (!appData.progress.dailyEntries.includes(today)) {
                appData.progress.dailyEntries.push(today);
                appData.progress.completedDays++;
                
                // Update streak
                if (appData.progress.dailyEntries.includes(today - 1) || today === 1) {
                    appData.progress.currentStreak++;
                } else {
                    appData.progress.currentStreak = 1;
                }
            }
            
            // Add to journal
            addJournalEntry('daily', 
                `–ó–∞–ø–∏—Å—å –¥–Ω—è - —Ç—Ä–µ–≤–æ–≥–∞ ${anxiety}/10`, 
                notes || '–ë–µ–∑ –∑–∞–º–µ—Ç–æ–∫',
                { anxiety: anxiety }
            );
            
            saveData();
            updateDashboard();
            initializeDailyTracker();
            showToast('–ó–∞–ø–∏—Å—å –¥–Ω—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        // Save diagnosis
        function saveDiagnosis() {
            const careerSat = document.getElementById('careerSat');
            const relationshipSat = document.getElementById('relationshipSat');
            const careerNotes = document.getElementById('careerNotes');
            const relationshipNotes = document.getElementById('relationshipNotes');
            
            if (!careerSat || !relationshipSat) return;
            
            const diagnosisText = `–ö–∞—Ä—å–µ—Ä–∞: ${careerSat.value}/10 (${careerNotes?.value || ''}), –û—Ç–Ω–æ—à–µ–Ω–∏—è: ${relationshipSat.value}/10 (${relationshipNotes?.value || ''})`;
            
            addJournalEntry('diagnosis', '–í—Ö–æ–¥–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞', diagnosisText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        // Save goals
        function saveGoals() {
            const goal1 = document.getElementById('goal1');
            const goal2 = document.getElementById('goal2');
            const goal1Reasons = document.getElementById('goal1Reasons');
            const goal2Reasons = document.getElementById('goal2Reasons');
            
            if (!goal1 || !goal2) return;
            
            const goalsText = `1. ${goal1.value} (–ø—Ä–∏—á–∏–Ω—ã: ${goal1Reasons?.value || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'}) 2. ${goal2.value} (–ø—Ä–∏—á–∏–Ω—ã: ${goal2Reasons?.value || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'})`;
            
            addJournalEntry('goals', '–ó–∞—Å—Ç—Ä—è–≤—à–∏–µ —Ü–µ–ª–∏', goalsText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–¶–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // Add defense entry
        function addDefenseEntry() {
            const reason = document.getElementById('defenseReason');
            const reaction = document.getElementById('defenseReaction');
            
            if (!reason || !reaction) return;
            
            const reasonText = reason.value;
            const reactionText = reaction.value;
            
            if (!reasonText.trim() || !reactionText.trim()) {
                showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            addJournalEntry('defense', 
                '–ó–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è', 
                `–°–∏—Ç—É–∞—Ü–∏—è: ${reasonText}. –†–µ–∞–∫—Ü–∏—è: ${reactionText}`
            );
            
            // Clear form
            reason.value = '';
            reaction.value = '';
            
            saveData();
            showToast('–ó–∞–ø–∏—Å—å –æ –∑–∞—â–∏—Ç–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        // Save defense analysis
        function saveDefenseAnalysis() {
            const defenses = [];
            ['denial', 'projection', 'rationalization'].forEach(defense => {
                const checkbox = document.getElementById(defense + 'Check');
                if (checkbox && checkbox.classList.contains('checked')) {
                    defenses.push(defense);
                }
            });
            
            const defenseText = defenses.length > 0 ? 
                `–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –∑–∞—â–∏—Ç—ã: ${defenses.join(', ')}` : 
                '–ó–∞—â–∏—Ç—ã –Ω–µ –≤—ã–±—Ä–∞–Ω—ã';
            
            addJournalEntry('defense', '–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤', defenseText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // Add symbol entry
        function addSymbolEntry() {
            const dream = document.getElementById('todayDream');
            const dreamEmotion = document.getElementById('dreamEmotion');
            const slips = document.getElementById('slipsOfTongue');
            
            if (!dream || !dreamEmotion || !slips) return;
            
            const symbolText = `–°–æ–Ω: ${dream.value || '–Ω–µ –ø–æ–º–Ω—é'}. –≠–º–æ—Ü–∏—è: ${dreamEmotion.value || '–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è'}. –û–≥–æ–≤–æ—Ä–∫–∏: ${slips.value || '–Ω–µ –±—ã–ª–æ'}`;
            
            addJournalEntry('symbols', '–°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –¥–Ω—è', symbolText);
            
            // Clear form
            dream.value = '';
            dreamEmotion.value = '';
            slips.value = '';
            
            saveData();
            showToast('–°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
        }

        // Save monthly plan
        function saveMonthlyPlan() {
            const monthFocus = document.getElementById('monthFocus');
            const week1Action = document.getElementById('week1Action');
            const week2Action = document.getElementById('week2Action');
            
            if (!monthFocus || !week1Action || !week2Action) return;
            
            const planText = `–§–æ–∫—É—Å: ${monthFocus.value}. –ù–µ–¥–µ–ª—è 1: ${week1Action.value}. –ù–µ–¥–µ–ª—è 2: ${week2Action.value}`;
            
            addJournalEntry('plan', '–ú–µ—Å—è—á–Ω—ã–π –ø–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏', planText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ü–ª–∞–Ω –º–µ—Å—è—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // Emergency techniques
        function startBreathingExercise() {
            const guide = document.getElementById('breathingGuide');
            const circle = document.getElementById('breathingCircle');
            
            if (!guide || !circle) return;
            
            guide.style.display = 'block';
            
            let step = 0;
            const steps = ['–í–¥–æ—Ö 4', '–ó–∞–¥–µ—Ä–∂–∫–∞ 7', '–í—ã–¥–æ—Ö 8', '–ü–∞—É–∑–∞'];
            const durations = [4000, 7000, 8000, 1000];
            
            function breathingCycle() {
                circle.textContent = steps[step];
                
                setTimeout(() => {
                    step = (step + 1) % 4;
                    if (guide.style.display !== 'none') {
                        breathingCycle();
                    }
                }, durations[step]);
            }
            
            breathingCycle();
        }

        function stopBreathingExercise() {
            const guide = document.getElementById('breathingGuide');
            if (guide) {
                guide.style.display = 'none';
            }
        }

        function show54321Technique() {
            const technique = document.getElementById('technique54321');
            if (technique) {
                technique.style.display = 'block';
            }
        }

        function hide54321Technique() {
            const technique = document.getElementById('technique54321');
            if (technique) {
                technique.style.display = 'none';
            }
        }

        function showProgressReminder() {
            const completedDays = appData.progress.completedDays;
            const completedExercises = appData.progress.completedExercises;
            
            showToast(`–í—ã —É–∂–µ –ø—Ä–æ—à–ª–∏ ${completedDays} –¥–Ω–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ ${completedExercises} —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π. –≠—Ç–æ –±–æ–ª—å—à–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å!`);
        }

        // Setup sliders for all satisfaction scales
        function setupSliders() {
            const sliders = [
                'todayAnxiety', 'careerSat', 'relationshipSat', 'familySat', 
                'healthSat', 'financeSat', 'growthSat', 'creativitySat',
                'barrier1Readiness', 'barrier2Readiness', 'barrier3Readiness'
            ];
            
            sliders.forEach(sliderId => {
                const slider = document.getElementById(sliderId);
                const valueId = sliderId.replace('Sat', 'Value').replace('Readiness', 'Value').replace('Anxiety', 'Value');
                const valueDisplay = document.getElementById(valueId);
                
                if (slider && valueDisplay) {
                    slider.addEventListener('input', function() {
                        valueDisplay.textContent = this.value;
                    });
                }
            });
        }

        // Save complete diagnosis
        function saveDiagnosis() {
            const areas = ['career', 'relationship', 'family', 'health', 'finance', 'growth', 'creativity'];
            let diagnosisText = '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: ';
            
            areas.forEach(area => {
                const satSlider = document.getElementById(area + 'Sat');
                const notesField = document.getElementById(area + 'Notes');
                if (satSlider) {
                    const satisfaction = satSlider.value;
                    const notes = notesField ? notesField.value : '';
                    diagnosisText += `${getAreaLabel(area)}: ${satisfaction}/10`;
                    if (notes) diagnosisText += ` (${notes})`;
                    diagnosisText += '; ';
                }
            });
            
            addJournalEntry('diagnosis', '–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö —Å—Ñ–µ—Ä', diagnosisText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        // Get area label
        function getAreaLabel(area) {
            const labels = {
                'career': '–ö–∞—Ä—å–µ—Ä–∞',
                'relationship': '–û—Ç–Ω–æ—à–µ–Ω–∏—è',
                'family': '–°–µ–º—å—è',
                'health': '–ó–¥–æ—Ä–æ–≤—å–µ',
                'finance': '–§–∏–Ω–∞–Ω—Å—ã',
                'growth': '–†–æ—Å—Ç',
                'creativity': '–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ'
            };
            return labels[area] || area;
        }

        // Save complete goals
        function saveGoals() {
            let goalsText = '–ó–∞—Å—Ç—Ä—è–≤—à–∏–µ —Ü–µ–ª–∏: ';
            
            for (let i = 1; i <= 3; i++) {
                const goal = document.getElementById(`goal${i}`);
                const time = document.getElementById(`goal${i}Time`);
                const reasons = document.getElementById(`goal${i}Reasons`);
                
                if (goal && goal.value) {
                    goalsText += `${i}. ${goal.value}`;
                    if (time && time.value) goalsText += ` (–∑–∞—Å—Ç—Ä—è–ª–∞: ${time.value})`;
                    if (reasons && reasons.value) goalsText += ` - –ø—Ä–∏—á–∏–Ω—ã: ${reasons.value}`;
                    goalsText += '; ';
                }
            }
            
            addJournalEntry('goals', '–ê–Ω–∞–ª–∏–∑ –∑–∞—Å—Ç—Ä—è–≤—à–∏—Ö —Ü–µ–ª–µ–π', goalsText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–¶–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // Save barrier hypotheses
        function saveBarrierHypotheses() {
            let hypothesesText = '–ì–∏–ø–æ—Ç–µ–∑—ã –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±–∞—Ä—å–µ—Ä–∞—Ö: ';
            
            for (let i = 1; i <= 3; i++) {
                const hypothesis = document.getElementById(`barrier${i}Hypothesis`);
                if (hypothesis && hypothesis.value) {
                    hypothesesText += `–ö —Ü–µ–ª–∏ ${i}: ${hypothesis.value}; `;
                }
            }
            
            addJournalEntry('diagnosis', '–ü–µ—Ä–≤—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã –æ –±–∞—Ä—å–µ—Ä–∞—Ö', hypothesesText);
            saveData();
            showToast('–ì–∏–ø–æ—Ç–µ–∑—ã –æ –±–∞—Ä—å–µ—Ä–∞—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // Enhanced defense analysis
        function saveDefenseAnalysis() {
            const defenses = [];
            const defenseTypes = ['denial', 'projection', 'rationalization', 'avoidance', 'regression', 'displacement', 'sublimation'];
            
            defenseTypes.forEach(defense => {
                const checkbox = document.getElementById(defense + 'Check');
                if (checkbox && checkbox.classList.contains('checked')) {
                    defenses.push(defense);
                }
            });
            
            const mainDefense = document.getElementById('mainDefense');
            const defenseFunction = document.getElementById('defenseFunction');
            
            let analysisText = `–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤: `;
            if (defenses.length > 0) {
                analysisText += `–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –∑–∞—â–∏—Ç—ã: ${defenses.join(', ')}. `;
            }
            if (mainDefense && mainDefense.value) {
                analysisText += `–ì–ª–∞–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞: ${mainDefense.value}. `;
            }
            if (defenseFunction && defenseFunction.value) {
                analysisText += `–§—É–Ω–∫—Ü–∏—è: ${defenseFunction.value}`;
            }
            
            addJournalEntry('defense', '–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤', analysisText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // Start experiment
        function startExperiment() {
            const alternative = document.getElementById('alternativeReaction');
            const situation = document.getElementById('experimentSituation');
            const action = document.getElementById('experimentAction');
            const date = document.getElementById('experimentDate');
            
            if (!alternative || !situation || !action) return;
            
            const experimentText = `–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –Ω–æ–≤–æ–π —Ä–µ–∞–∫—Ü–∏–µ–π: –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –∑–∞—â–∏—Ç—ã –±—É–¥—É ${alternative.value}. –°–∏—Ç—É–∞—Ü–∏—è: ${situation.value}. –î–µ–π—Å—Ç–≤–∏–µ: ${action.value}. –î–∞—Ç–∞: ${date ? date.value : '–Ω–µ —É–∫–∞–∑–∞–Ω–∞'}`;
            
            addJournalEntry('defense', '–ù–∞—á–∞–ª–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ —Å –Ω–æ–≤–æ–π —Ä–µ–∞–∫—Ü–∏–µ–π', experimentText);
            saveData();
            showToast('–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω! –£–¥–∞—á–∏!');
        }

        // Analyze symbols
        function analyzeSymbols() {
            const dreamImages = document.getElementById('repeatingDreamImages');
            const slips = document.getElementById('repeatingSlips');
            const attention = document.getElementById('repeatingAttention');
            
            let analysisText = '–ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤: ';
            if (dreamImages && dreamImages.value) {
                analysisText += `–û–±—Ä–∞–∑—ã –≤ —Å–Ω–∞—Ö: ${dreamImages.value}. `;
            }
            if (slips && slips.value) {
                analysisText += `–¢–µ–º—ã –æ–≥–æ–≤–æ—Ä–æ–∫: ${slips.value}. `;
            }
            if (attention && attention.value) {
                analysisText += `–ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ: ${attention.value}`;
            }
            
            addJournalEntry('symbols', '–ê–Ω–∞–ª–∏–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤', analysisText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ê–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // Save symbol analysis
        function saveSymbolAnalysis() {
            const symbol = document.getElementById('selectedSymbol');
            const emotion = document.getElementById('symbolEmotion');
            const parallel = document.getElementById('symbolParallel');
            const hypothesis = document.getElementById('symbolHypothesis');
            const experiment = document.getElementById('symbolExperiment');
            
            let analysisText = '–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞: ';
            if (symbol && symbol.value) analysisText += `–°–∏–º–≤–æ–ª: ${symbol.value}. `;
            if (emotion && emotion.value) analysisText += `–≠–º–æ—Ü–∏—è: ${emotion.value}. `;
            if (parallel && parallel.value) analysisText += `–ü–∞—Ä–∞–ª–ª–µ–ª—å –≤ –∂–∏–∑–Ω–∏: ${parallel.value}. `;
            if (hypothesis && hypothesis.value) analysisText += `–ì–∏–ø–æ—Ç–µ–∑–∞: ${hypothesis.value}. `;
            if (experiment && experiment.value) analysisText += `–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç: ${experiment.value}`;
            
            addJournalEntry('symbols', '–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞', analysisText);
            saveData();
            showToast('–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        // Choose barrier for work
        function chooseBarrier() {
            const chosenBarrier = document.getElementById('chosenBarrier');
            const reason = document.getElementById('barrierReason');
            
            if (!chosenBarrier || !reason) return;
            
            const choiceText = `–í—ã–±–æ—Ä –±–∞—Ä—å–µ—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã: ${chosenBarrier.value}. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ${reason.value}`;
            
            addJournalEntry('plan', '–í—ã–±–æ—Ä —Ñ–æ–∫—É—Å–∞ –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏', choiceText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ë–∞—Ä—å–µ—Ä –≤—ã–±—Ä–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã!');
        }

        // Save complete monthly plan
        function saveMonthlyPlan() {
            const monthFocus = document.getElementById('monthFocus');
            let planText = '–ú–µ—Å—è—á–Ω—ã–π –ø–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏: ';
            
            if (monthFocus && monthFocus.value) {
                planText += `–§–æ–∫—É—Å: ${monthFocus.value}. `;
            }
            
            for (let i = 1; i <= 4; i++) {
                const action = document.getElementById(`week${i}Action`);
                const deadline = document.getElementById(`week${i}Deadline`);
                const success = document.getElementById(`week${i}Success`);
                
                if (action && action.value) {
                    planText += `–ù–µ–¥–µ–ª—è ${i}: ${action.value}`;
                    if (deadline && deadline.value) planText += ` (–¥–æ ${deadline.value})`;
                    if (success && success.value) planText += ` - –∫—Ä–∏—Ç–µ—Ä–∏–π: ${success.value}`;
                    planText += '. ';
                }
            }
            
            addJournalEntry('plan', '–ú–µ—Å—è—á–Ω—ã–π –ø–ª–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏', planText);
            
            appData.progress.completedExercises++;
            saveData();
            updateProgressBar();
            showToast('–ü–ª–∞–Ω –º–µ—Å—è—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        }

        // Save support system
        function saveSupportSystem() {
            const supportPerson = document.getElementById('supportPerson');
            const reminders = document.getElementById('reminders');
            const relapsePlan = document.getElementById('relapsePlan');
            
            let supportText = '–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏: ';
            if (supportPerson && supportPerson.value) supportText += `–ü–æ–¥–¥–µ—Ä–∂–∫–∞: ${supportPerson.value}. `;
            if (reminders && reminders.value) supportText += `–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: ${reminders.value}. `;
            if (relapsePlan && relapsePlan.value) supportText += `–ü—Ä–∏ —Å—Ä—ã–≤–∞—Ö: ${relapsePlan.value}`;
            
            addJournalEntry('plan', '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏', supportText);
            saveData();
            showToast('–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!');
        }

        // Additional emergency techniques
        function showSelfCompassion() {
            const card = document.getElementById('selfCompassionCard');
            if (card) card.style.display = 'block';
        }

        function hideSelfCompassion() {
            const card = document.getElementById('selfCompassionCard');
            if (card) card.style.display = 'none';
        }

        function showBodyRelaxation() {
            const card = document.getElementById('bodyRelaxationCard');
            if (card) card.style.display = 'block';
        }

        function hideBodyRelaxation() {
            const card = document.getElementById('bodyRelaxationCard');
            if (card) card.style.display = 'none';
        }

        // Save emergency contacts
        function saveEmergencyContacts() {
            const personal = document.getElementById('emergencyContact');
            const professional = document.getElementById('professionalContact');
            const hotline = document.getElementById('hotlineContact');
            
            appData.emergencyContacts = {
                personal: personal ? personal.value : '',
                professional: professional ? professional.value : '',
                hotline: hotline ? hotline.value : ''
            };
            
            saveData();
            showToast('–ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // Export functions
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            downloadFile('psychoanalysis_data.json', dataStr, 'application/json');
            showToast('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!');
        }

        function exportProgress() {
            const progressReport = generateProgressReport();
            downloadFile('progress_report.txt', progressReport, 'text/plain');
            showToast('–û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!');
        }

        function exportJournalOnly() {
            if (!appData.journalEntries || appData.journalEntries.length === 0) {
                showToast('–ñ—É—Ä–Ω–∞–ª –ø—É—Å—Ç!');
                return;
            }
            
            let journalText = '–ñ–£–†–ù–ê–õ –ó–ê–ü–ò–°–ï–ô\n=================\n\n';
            appData.journalEntries.forEach(entry => {
                const date = new Date(entry.date).toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                journalText += `${date} - ${getTypeLabel(entry.type)}\n`;
                journalText += `${entry.title}\n`;
                journalText += `${entry.content}\n\n`;
            });
            
            downloadFile('journal.txt', journalText, 'text/plain');
            showToast('–ñ—É—Ä–Ω–∞–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!');
        }

        function generateProgressReport() {
            const avgAnxiety = appData.progress.anxietyHistory.length > 0 ? 
                (appData.progress.anxietyHistory.reduce((a, b) => a + b, 0) / appData.progress.anxietyHistory.length).toFixed(1) : '–Ω/–¥';
            
            return `–û–¢–ß–ï–¢ –û –ü–†–û–ì–†–ï–°–°–ï
=================

–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- –î–Ω–µ–π –ø—Ä–∞–∫—Ç–∏–∫–∏: ${appData.progress.completedDays}
- –¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è: ${appData.progress.currentStreak}
- –í—ã–ø–æ–ª–Ω–µ–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π: ${appData.progress.completedExercises}
- –°—Ä–µ–¥–Ω—è—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å: ${avgAnxiety}/10
- –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ –∂—É—Ä–Ω–∞–ª–µ: ${appData.journalEntries ? appData.journalEntries.length : 0}
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö —Å–≤–æ–¥–æ–∫: ${appData.weeklySummaries ? appData.weeklySummaries.length : 0}

–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º:
${getActivityByType()}

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏:
${getRecentEntries()}
            `;
        }

        function getActivityByType() {
            if (!appData.journalEntries) return '–ó–∞–ø–∏—Å–µ–π –Ω–µ—Ç';
            
            const typeCount = {};
            appData.journalEntries.forEach(entry => {
                typeCount[entry.type] = (typeCount[entry.type] || 0) + 1;
            });
            
            return Object.entries(typeCount)
                .map(([type, count]) => `- ${getTypeLabel(type)}: ${count} –∑–∞–ø–∏—Å–µ–π`)
                .join('\n');
        }

        function getRecentEntries() {
            if (!appData.journalEntries || appData.journalEntries.length === 0) {
                return '–ó–∞–ø–∏—Å–µ–π –Ω–µ—Ç';
            }
            
            return appData.journalEntries
                .slice(0, 5)
                .map(entry => {
                    const date = new Date(entry.date).toLocaleDateString('ru-RU');
                    return `- ${date}: ${entry.title}`;
                })
                .join('\n');
        }

        function downloadFile(filename, content, contentType) {
            const blob = new Blob([content], { type: contentType });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // Initialize app when page loads
        function initializeApp() {
            loadData();
            setupSliders();
            
            // Set up Telegram WebApp main button
            if (tg && tg.MainButton) {
                tg.MainButton.setText('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å');
                tg.MainButton.onClick(function() {
                    saveData();
                    showToast('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
                });
                tg.MainButton.show();
            }
            
            // Auto-save every 5 minutes
            setInterval(saveData, 300000);
        }

        // Handle page visibility change to save data
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'hidden') {
                saveData();
            }
        });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        // Fallback initialization
        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>